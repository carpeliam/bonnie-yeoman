<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- build:js scripts/vendor/modernizr.js -->
    <script src="bower_components/modernizr/modernizr.js"></script>
    <!-- endbuild -->
  </head>
  <body>
    <div class="container">
      <div class="navbar" role="navigation">
          <a class="navbar-brand col-md-6" href="#">BONNIE</a>
          <ul class="nav navbar-nav">
            <li><a href="index.html" class="active">Dashboard</a></li>
            <li><a href="builder.html" class="">Patients</a></li>
            <li><a href="results.html" class="">Results</a></li>
          </ul>
      </div>
      <div class="dashboard-heading row">
        <div class="measure-col">
          <div class="btn-wrapper pull-right">
            <button "importMeasure" class="btn btn-primary">Upload</button>
          </div>
          <h1><i class="glyphicon glyphicon-tasks"></i> Measures</h1>
        </div>
        <div class="expected-col">
          <h2>Expected</h2>
        </div>
        <div class="status-col">
          <h2>Status</h2>
        </div>
        <div class="patient-listing-col">
          <h2>Test Patients</h2>
        </div>
      </div>

      {{#collection class="dashboard-data" item-view=measureRowView}}

        <div class="measure row">
          <div class="measure-col">
            <div class="btn-wrapper pull-right">
              <button "updateMeasure" class="btn btn-primary">Update</button>
            </div>
            <div class="measure-title">
               <span class="nqf-listing pull-right">
                0038
              </span>
              Preventive Care and Screening: Risk-Stratified Cholesterol â€“ Fasting Low Density Lipoprotein (LDL-C)
            </div>
          </div>
          <div class="expected-col">
              <input type="text" value="{{expectedPercentage}}" class="dial" data-readOnly="true" data-width="60" data-height="60" data-thickness=".2" data-fgColor= data-inputColor="#444" data-font="Helvetica Neue, Roboto, Helvetica, Arial, sans-serif">
            {{/unless}}
          </div>
          <div class="status-col status">
          </div>
          <div class="patient-listing-col">
            <a href="#measures/{{hqmf_set_id}}/patients/new" class="btn btn-default pull-right">
              <i class="fa fa-user"></i>
              <i class="fa fa-plus"></i>
            </a>
            {{!-- FIXME: Should the following be patients.length or some other value? --}}
            <span class="patient-listing">
              {{#if hasPopulations}}
                {{patients.length}}
              {{else}}
                {{matches}}
              {{/if}}
            </span>
            {{#if hasFraction}}
              <span class="fraction">/{{patients.length}}</span>
            {{/if}}
          </div>
        </div>

        {{#if hasPopulations}}
          {{#collection populations item-context=populationContext}}
            <div class="row population">
              <div class="population-col">
                <div class="population-title">
                  <strong>population:</strong> {{title}}
                </div>
              </div>
              <div class="expected-col">
                <input type="text" value="{{expectedPercentage}}" class="dial" data-readOnly="true" data-width="60" data-height="60" data-thickness=".2" data-fgColor={{#ifCond status '==' 'pass'}}"#468847"{{/ifCond}}{{#ifCond status '==' 'fail'}}"#b94a48"{{/ifCond}} data-inputColor="#444" data-font="Helvetica Neue, Roboto, Helvetica, Arial, sans-serif">
              </div>
              <div class="status-col status status-{{status}}">
                {{status}}
              </div>
              <div class="patient-listing-col">
                <span class="patient-listing">{{matches}}</span>
                {{#if hasFraction}}
                  <span class="fraction">/{{../../patients.length}}</span>
                {{/if}}
              </div>
            </div>
          {{/collection}}
        {{/if}}
      {{/collection}}

      {{! FIXME view creation/removal should happen as necessary in view, not in handlebars }}
      {{view finalizeMeasuresView}}

    </div>



    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-XXXXX-X');ga('send','pageview');
    </script>


        <!-- build:js scripts/main.js -->
        <script src="bower_components/jquery/jquery.js"></script>
        <script src="scripts/main.js"></script>
        <script src="scripts/hello.js"></script>
        <!-- endbuild -->

        <!-- build:js scripts/vendor/bootstrap.js -->
        <script src="bower_components/bootstrap/js/affix.js"></script>
        <script src="bower_components/bootstrap/js/alert.js"></script>
        <script src="bower_components/bootstrap/js/dropdown.js"></script>
        <script src="bower_components/bootstrap/js/tooltip.js"></script>
        <script src="bower_components/bootstrap/js/modal.js"></script>
        <script src="bower_components/bootstrap/js/transition.js"></script>
        <script src="bower_components/bootstrap/js/button.js"></script>
        <script src="bower_components/bootstrap/js/popover.js"></script>
        <script src="bower_components/bootstrap/js/carousel.js"></script>
        <script src="bower_components/bootstrap/js/scrollspy.js"></script>
        <script src="bower_components/bootstrap/js/collapse.js"></script>
        <script src="bower_components/bootstrap/js/tab.js"></script>
        <!-- endbuild -->
        <script>
          $('#update').popover({
              html: true, content: $('#template').text()
            });
        </script>
  </body>
</html>
